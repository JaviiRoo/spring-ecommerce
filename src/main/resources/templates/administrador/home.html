<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="Panel Administrador - MarketPlace">
  <meta name="author" content="">
  <title>Dashboard - Admin MarketPlace</title>

    <link th:href="@{/vendor/bootstrap/css/bootstrap.min.css}" rel="stylesheet">
    <link th:href="@{/css/administrador/template_admin.css}" rel="stylesheet">
	<link th:href="@{/css/administrador/home.css}" rel="stylesheet">

</head>

<body>
  
   <!-- Header -->
  <div th:replace="administrador/template_admin.html::header"></div>
  


  <div class="container">
    <!-- Welcome Section -->
    <section class="welcome-section">
      <div class="welcome-content">
        <h1 class="welcome-title">👋 Bienvenido, Administrador</h1>
        <p class="welcome-subtitle">Gestiona tu eCommerce de manera eficiente desde un solo lugar</p>
        <span class="welcome-time">
          🕐 <span id="currentTime"></span>
        </span>
      </div>
    </section>

    <!-- Stats Grid -->
    <div class="stats-grid">
      <div class="stat-card">
        <div class="stat-header">
          <div class="stat-icon blue">📦</div>
          <div class="stat-trend">↑ 12%</div>
        </div>
        <div class="stat-content">
          <h4>Total Productos</h4>
          <p th:text="${productos.size()}">0</p>
        </div>
        <div class="stat-footer">Productos activos en el catálogo</div>
      </div>

      <div class="stat-card">
        <div class="stat-header">
          <div class="stat-icon pink">👥</div>
          <div class="stat-trend">↑ 8%</div>
        </div>
        <div class="stat-content">
          <h4>Usuarios</h4>
          <p>142</p>
        </div>
        <div class="stat-footer">Usuarios registrados</div>
      </div>

      <div class="stat-card">
        <div class="stat-header">
          <div class="stat-icon green">💰</div>
          <div class="stat-trend">↑ 23%</div>
        </div>
        <div class="stat-content">
          <h4>Ventas Totales</h4>
          <p>$12,450</p>
        </div>
        <div class="stat-footer">Ingresos este mes</div>
      </div>

      <div class="stat-card">
        <div class="stat-header">
          <div class="stat-icon orange">📊</div>
          <div class="stat-trend">↑ 15%</div>
        </div>
        <div class="stat-content">
          <h4>Órdenes</h4>
          <p>89</p>
        </div>
        <div class="stat-footer">Pedidos completados</div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions">
      <h3>⚡ Acciones Rápidas</h3>
      <div class="actions-grid">
        <a th:href="@{/productos/create}" class="action-btn">
          <div class="action-icon">➕</div>
          <span>Crear Producto</span>
        </a>
        <a th:href="@{/productos}" class="action-btn">
          <div class="action-icon">📦</div>
          <span>Ver Productos</span>
        </a>
        <a th:href="@{/administrador/ordenes}" class="action-btn">
          <div class="action-icon">📋</div>
          <span>Ver Órdenes</span>
        </a>
        <a th:href="@{/administrador/usuarios}" class="action-btn">
          <div class="action-icon">👥</div>
          <span>Ver Usuarios</span>
        </a>
      </div>
    </div>

    <!-- Products Section -->
    <section class="products-section">
      <div class="section-header">
        <h2>🛍️ Productos Recientes</h2>
        <div class="search-bar">
          <input type="text" id="searchInput" placeholder="Buscar producto..." onkeyup="filterProducts()">
        </div>
      </div>

      <div class="products-grid" id="productsGrid">
        <div th:each="producto: ${productos}" th:if="${productoStat.index < 8}">
          <div class="product-card">
            <div class="product-image">
              <img th:src="@{/images/{img}(img=${producto.imagen})}" alt="Producto">
              <div class="product-badge">Activo</div>
            </div>
            <div class="product-info">
              <h5 th:text="${producto.nombre}">Producto</h5>
              <p class="product-price" th:text="'$' + ${producto.precio}">$0.00</p>
            </div>
            <div class="product-actions">
              <a th:href="@{/productos/edit/{id}(id=${producto.id})}" class="btn-action btn-edit">
                ✏️ Editar
              </a>
              <a href="#" class="btn-action btn-view" onclick="alert('Funcionalidad próximamente'); return false;">
                👁️ Ver
              </a>
            </div>
          </div>
        </div>
      </div>

      <div th:if="${productos.empty}" class="empty-state">
        <div class="empty-icon">📦</div>
        <h3>No hay productos registrados</h3>
        <p>Comienza agregando productos al catálogo desde el panel de administración</p>
        <a th:href="@{/productos/create}" class="btn-action btn-edit" style="display: inline-block; width: auto; padding: 1rem 2rem;">
          ➕ Crear Primer Producto
        </a>
      </div>
    </section>
  </div>

  <!-- Footer -->
  <div th:replace="administrador/template_admin.html::footer"></div>


  <!-- Scripts -->
  <script th:src="@{/vendor/jquery/jquery.min.js}"></script>
  <script th:src="@{/vendor/bootstrap/js/bootstrap.bundle.min.js}"></script>
  <script>
    // Current time display
    function updateTime() {
      const now = new Date();
      const options = { 
        weekday: 'long', 
        year: 'numeric', 
        month: 'long', 
        day: 'numeric',
        hour: '2-digit',
        minute: '2-digit'
      };
      document.getElementById('currentTime').textContent = now.toLocaleDateString('es-ES', options);
    }
    updateTime();
    setInterval(updateTime, 60000);

    // Search products
    function filterProducts() {
      const input = document.getElementById('searchInput').value.toUpperCase();
      const grid = document.getElementById('productsGrid');
      const cards = grid.getElementsByClassName('product-card');
      
      for (let card of cards) {
        const name = card.querySelector('h5').innerText.toUpperCase();
        card.parentElement.style.display = name.includes(input) ? '' : 'none';
      }
    }
  </script>
</body>
</html>