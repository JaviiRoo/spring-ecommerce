<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="">
  <meta name="author" content="">
  <title>Detalle de Compra - MarketPlace</title>

  <!-- Bootstrap core CSS -->
  <link th:href="@{/vendor/bootstrap/css/bootstrap.min.css}" rel="stylesheet">
  <!-- Custom styles -->
  <link th:href="@{/css/usuario/detallecompra.css}" rel="stylesheet">
  <link th:href="@{/css/usuario/template_usuario.css}" rel="stylesheet">

</head>

<body>
  <!-- Navigation -->
  <div th:insert="~{usuario/template_usuario.html::header}" th:if="${sesion==null}"></div>
  <div th:insert="~{usuario/template_usuario.html::header-user}" th:unless="${sesion==null}"></div>

  <!-- Page Header -->
  <div class="page-header">
    <div class="container">
      <h1 class="page-title">
        <span>üìã</span>
        <span>Detalle de Compra</span>
      </h1>
    </div>
  </div>

  <!-- Page Content -->
  <div class="container main-container">
    <!-- Order Info Card -->
    <div class="order-info-card">
      <div class="info-item">
        <div class="info-icon">üì¶</div>
        <span class="info-label">N√∫mero de Orden</span>
        <span class="info-value" th:text="${orden.numero}">#12345</span>
      </div>
      <div class="info-item">
        <div class="info-icon">üìÖ</div>
        <span class="info-label">Fecha de Compra</span>
        <span class="info-value" th:text="${orden.fechaCreacion}">01/01/2024</span>
      </div>
      <div class="info-item">
        <div class="info-icon">‚úì</div>
        <span class="info-label">Estado</span>
        <span class="info-value" style="color: var(--success);">Completado</span>
      </div>
    </div>

    <div class="row">
      <div class="col-lg-8">
        <!-- Status Timeline -->
        <div class="status-timeline">
          <div class="timeline-header">
            <div class="timeline-icon">üöö</div>
            <h3>Estado del Pedido</h3>
          </div>
          <div class="timeline-items">
            <div class="timeline-item">
              <div class="timeline-marker">‚úì</div>
              <div class="timeline-content">
                <div class="timeline-title">Pedido Confirmado</div>
                <div class="timeline-date" th:text="${orden.fechaCreacion}">Hoy a las 10:30 AM</div>
              </div>
            </div>
            <div class="timeline-item">
              <div class="timeline-marker">‚úì</div>
              <div class="timeline-content">
                <div class="timeline-title">En Preparaci√≥n</div>
                <div class="timeline-date">Hoy a las 11:00 AM</div>
              </div>
            </div>
            <div class="timeline-item">
              <div class="timeline-marker">‚úì</div>
              <div class="timeline-content">
                <div class="timeline-title">Enviado</div>
                <div class="timeline-date">Hoy a las 2:00 PM</div>
              </div>
            </div>
            <div class="timeline-item">
              <div class="timeline-marker">‚úì</div>
              <div class="timeline-content">
                <div class="timeline-title">Entregado</div>
                <div class="timeline-date">Completado</div>
              </div>
            </div>
          </div>
        </div>

        <!-- Detail Card -->
        <div class="detail-card">
          <div class="detail-header">
            <div class="detail-header-left">
              <div class="detail-header-icon">üõçÔ∏è</div>
              <h3>Productos del Pedido</h3>
            </div>
            <a th:href="@{/usuario/compras}" class="back-btn">
              ‚Üê Volver a Compras
            </a>
          </div>
          <div class="card-body">
            <div class="table-responsive">
              <table class="detail-table">
                <thead>
                  <tr>
                    <th>Cantidad</th>
                    <th>Producto</th>
                    <th>Precio Unitario</th>
                    <th>Total</th>
                  </tr>
                </thead>
                <tbody>
                  <tr th:each="detalle:${detalles}" class="detail-item">
                    <td>
                      <div class="product-quantity" th:text="${detalle.cantidad}">2</div>
                    </td>
                    <td>
                      <div class="product-info">
						<img th:src="@{/images/{img} (img=${detalle.producto.imagen})}" alt="Producto" class="product-image">
                        <div class="product-details">
                          <div class="product-name" th:text="${detalle.nombre}">Producto</div>
                          <div class="product-description">Descripci√≥n del producto</div>
                        </div>
                      </div>
                    </td>
                    <td>
                      <div class="product-price" th:text="'‚Ç¨' + ${detalle.precio}">$50.00</div>
                    </td>
                    <td>
                      <div class="product-total" th:text="'‚Ç¨' + ${detalle.total}">$100.00</div>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>

      <div class="col-lg-4">
        <!-- Order Total Section -->
        <div class="order-total-section">
          <div class="total-header">
            <div class="total-icon">üí∞</div>
            <h3>Resumen</h3>
          </div>
          
          <div class="total-breakdown">
            <div class="total-row">
              <span class="total-label">Subtotal</span>
              <span class="total-value" th:text="'‚Ç¨' + ${orden.total}">$250.00</span>
            </div>
            <div class="total-row">
              <span class="total-label">Env√≠o</span>
              <span class="total-value" style="color: var(--success);">GRATIS</span>
            </div>
            <div class="total-row">
              <span class="total-label">Descuentos</span>
              <span class="total-value">‚Ç¨0.00</span>
            </div>
            <div class="total-row">
              <span class="grand-total-label">Total</span>
              <span class="grand-total-value" th:text="'‚Ç¨' + ${orden.total}">$250.00</span>
            </div>
          </div>
          
		  <div class="order-actions">
		      <a th:href="@{'/usuario/orden/' + ${orden.id} + '/imprimir'}" class="btn-action btn-print">
		          üñ®Ô∏è Imprimir
		      </a>
		      <a th:href="@{'/usuario/orden/' + ${orden.id} + '/descargar'}" class="btn-action btn-download">
		          üì• Descargar
		      </a>
		  </div>

          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div th:insert="~{usuario/template_usuario.html::footer}"></div>

  <!-- Scripts -->
  <script th:src="@{/vendor/jquery/jquery.min.js}"></script>
  <script th:src="@{/vendor/bootstrap/js/bootstrap.bundle.min.js}"></script>
</body>
</html>