<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Carrito - MarketPlace</title>

  <!-- Bootstrap core CSS -->
  <link th:href="@{/vendor/bootstrap/css/bootstrap.min.css}" rel="stylesheet">
  <!-- Custom styles -->
  <link th:href="@{/css/usuario/carrito.css}" rel="stylesheet">
  <link th:href="@{/css/usuario/template_usuario.css}" rel="stylesheet">
</head>

<body>
  <!-- Navigation -->
  <div th:insert="~{usuario/template_usuario.html::header}" th:if="${sesion==null}"></div>
  <div th:insert="~{usuario/template_usuario.html::header-user}" th:unless="${sesion==null}"></div>

  <!-- Page Header -->
  <div class="page-header">
    <div class="container">
      <h1 class="page-title">üõí Carrito de Compras</h1>
    </div>
  </div>

  <!-- Page Content -->
  <div class="container main-container">
    <div class="row">
      <!-- Cart Items -->
      <div class="col-lg-8">
        <div class="cart-card">
          <div class="cart-header">
            <div class="cart-header-icon">üõçÔ∏è</div>
            <h3>Tus Productos</h3>
          </div>
          <div class="cart-body">
            <div th:if="${cart != null and !cart.empty}">
              <div class="table-responsive">
                <table class="cart-table">
                  <thead>
                    <tr>
                      <th>Producto</th>
                      <th>Precio</th>
                      <th>Cantidad</th>
                      <th>Total</th>
                      <th>Acci√≥n</th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr th:each="dorden : ${cart}" class="cart-item">
                      <td>
                        <div class="product-info">
							<img th:src="@{/images/{img} (img=${dorden.producto.imagen})}" alt="Producto" class="product-image">
                          <div class="product-details">
                            <div class="product-name" th:text="${dorden.nombre}"></div>
                            <div class="product-description">Producto de calidad</div>
                          </div>
                        </div>
                      </td>
                      <td>
                        <div class="product-price" th:text="'‚Ç¨' + ${dorden.precio}"></div>
                      </td>
                      <td>
                        <div class="product-quantity">
                          <span>√ó</span>
                          <span th:text="${dorden.cantidad}"></span>
                        </div>
                      </td>
                      <td>
                        <div class="product-total" th:text="'‚Ç¨' + ${dorden.total}"></div>
                      </td>
                      <td>
                        <a th:href="@{/delete/cart/{id}(id=${dorden.producto.id})}" class="btn-delete">
                          üóëÔ∏è Eliminar
                        </a>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
            <div th:if="${cart == null or cart.empty}" class="empty-cart">
              <div class="empty-cart-icon">üõí</div>
              <h4>Tu carrito est√° vac√≠o</h4>
              <p>Agrega algunos productos incre√≠bles para continuar con tu compra</p>
              <a th:href="@{/}" class="btn-primary" style="width: auto; display: inline-flex; padding: 1rem 2rem;">
                üè™ Explorar Productos
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Order Summary -->
      <div class="col-lg-4" th:if="${cart != null and !cart.empty}">
        <div class="summary-card">
          <div class="summary-header">
            <div class="summary-icon">üìä</div>
            <h3 class="summary-title">Resumen</h3>
          </div>
          
          <div class="summary-row">
            <span class="summary-label">Productos</span>
            <span class="summary-value" th:text="${cart.size()} + ' items'"></span>
          </div>
          
          <div class="summary-row">
            <span class="summary-label">Subtotal</span>
            <span class="summary-value" th:text="'‚Ç¨' + ${orden.total}"></span>
          </div>
          
          <div class="summary-row">
            <span class="summary-label">Env√≠o</span>
            <span class="summary-value" style="color: var(--success);">GRATIS</span>
          </div>
          
          <div class="summary-row">
            <span class="summary-label" style="font-size: 1.125rem; font-weight: 700; color: var(--text-primary);">Total</span>
            <span class="summary-total" th:text="'‚Ç¨' + ${orden.total}"></span>
          </div>
          
          <a th:href="@{/orden}" class="btn-primary">
            üí≥ Proceder al Pago
          </a>
          
          <a th:href="@{/}" class="btn-secondary">
            ‚Üê Seguir Comprando
          </a>
          
          <div class="security-badges">
            <div class="security-badge">
              <div class="security-icon">‚úì</div>
              <span>Pago 100% seguro</span>
            </div>
            <div class="security-badge">
              <div class="security-icon">‚úì</div>
              <span>Env√≠o gratuito en todos los pedidos</span>
            </div>
            <div class="security-badge">
              <div class="security-icon">‚úì</div>
              <span>Garant√≠a de devoluci√≥n de 30 d√≠as</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <div th:insert="~{usuario/template_usuario.html::footer}"></div>

  <!-- Bootstrap core JavaScript -->
  <script th:src="@{/vendor/jquery/jquery.min.js}"></script>
  <script th:src="@{/vendor/bootstrap/js/bootstrap.bundle.min.js}"></script>
</body>
</html>
